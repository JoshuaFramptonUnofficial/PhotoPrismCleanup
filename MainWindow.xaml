<Window x:Class="PhotoPrismCleanup.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PhotoPrism Cleanup" Height="650" Width="900"
        PreviewKeyDown="Window_PreviewKeyDown">
  <DockPanel>

    <!-- TOP MENU: Tools & Logout always visible -->
    <Menu DockPanel.Dock="Top">
      <MenuItem Header="_Tools">
        <MenuItem Header="Bulk Delete Now" Click="BulkDeleteNow_Click"/>
        <MenuItem Header="Clear Thumbnail Cache" Click="ClearCache_Click"/>
        <MenuItem Header="Import Photos" Click="ImportPhotos_Click"/>
      </MenuItem>
      <MenuItem Header="Logout" Click="Logout_Click"/>
    </Menu>

    <!-- STATUS BAR -->
    <StatusBar DockPanel.Dock="Bottom">
      <TextBlock x:Name="StatusText" Text="Not connected"/>
    </StatusBar>

    <Grid>
      <!-- CONNECT PANEL (visible at startup) -->
      <Grid x:Name="ConnectGrid" Margin="20">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <TextBlock Text="Host:"     Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox   x:Name="HostBox" Grid.Row="0" Grid.Column="1" Margin="5"/>

        <TextBlock Text="Port:"     Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox   x:Name="PortBox" Grid.Row="1" Grid.Column="1" Margin="5"/>

        <TextBlock Text="Username:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox   x:Name="UserBox" Grid.Row="2" Grid.Column="1" Margin="5"/>

        <CheckBox x:Name="UseKeyBox" Content="Use Key Auth"
                  Grid.Row="3" Grid.Column="1" Margin="5"/>

        <TextBlock Text="Key Path:" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"/>
        <TextBox   x:Name="KeyBox"  Grid.Row="4" Grid.Column="1" Margin="5"/>

        <TextBlock Text="Password:" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center"/>
        <PasswordBox x:Name="PwdBox" Grid.Row="5" Grid.Column="1" Margin="5"/>

        <Button x:Name="ConnectBtn" Content="Connect"
                Grid.Row="6" Grid.ColumnSpan="2" Width="120" Margin="0,10,0,0"
                HorizontalAlignment="Center"
                Click="ConnectBtn_Click"/>
      </Grid>

      <!-- REVIEW & SETTINGS TABS (collapsed until Connect succeeds) -->
      <TabControl x:Name="MainTabs" Visibility="Collapsed">
        <!-- REVIEW TAB -->
        <TabItem Header="Review">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="*"/>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Border Grid.Row="0" Margin="10" BorderBrush="Gray" BorderThickness="1">
              <Viewbox>
                <Grid>
                  <Image x:Name="PhotoImg" Stretch="Uniform" Visibility="Collapsed"/>
                  <MediaElement x:Name="VideoPlayer"
                                LoadedBehavior="Manual"
                                UnloadedBehavior="Stop"
                                Visibility="Collapsed"/>
                </Grid>
              </Viewbox>
            </Border>

            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
              <Button x:Name="DelBtn" Content="Delete"
                      Style="{StaticResource DeleteBtn}" Click="DelBtn_Click"/>
              <Button x:Name="UndoBtn" Content="Undo (Z/↓)"
                      Click="UndoBtn_Click"/>
              <Button x:Name="KeepBtn" Content="Keep"
                      Style="{StaticResource KeepBtn}" Click="KeepBtn_Click"/>
            </StackPanel>

            <TextBlock Grid.Row="2" x:Name="ProgressText"
                       HorizontalAlignment="Center" Margin="5"/>
          </Grid>
        </TabItem>

        <!-- SETTINGS TAB -->
        <TabItem Header="Settings">
          <StackPanel Margin="10">
            <TextBlock Text="Remote Folder:"/>
            <TextBox x:Name="FolderBox" Width="400" Margin="0,5,0,15"/>
            <Button Content="Save Settings" Width="130"
                    Click="SaveSettings_Click"/>
          </StackPanel>
        </TabItem>
      </TabControl>
    </Grid>
  </DockPanel>
</Window>
